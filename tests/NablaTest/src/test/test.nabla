module Test;
with Math.*;
itemtypes { node, cell }

set nodes: → {node};
set cells: → {cell};
set nodesOfCell: cell → {node};
const X_EDGE_LENGTH = 0.01;
const Y_EDGE_LENGTH = X_EDGE_LENGTH;
const X_EDGE_ELEMS = 100;
const Y_EDGE_ELEMS = 100;
const max_time_iterations = 500000000;
const final_time = 1.;
let t = 0.0;
let δt = 0.001;
ℝ[2] X{nodes};
ℝ U{cells};
ℝ[2] C{cells, nodesOfCell};
ℝ c1 {cells}, c2 {cells};

//InitU : ∀r∈cells(), U{r} = 1.0;
ComputeCjr: ∀j∈cells(), {
	set rCellsJ = nodesOfCell(j);
	const cardRCellsJ = card(rCellsJ);
	ℝ[cardRCellsJ] tmp;
	∀ r, ir ∈ rCellsJ, {
		tmp[ir] = X{r}[0];
		C{j,r} = 0.5 * (X{r+1} - X{r-1});
	}
}		

